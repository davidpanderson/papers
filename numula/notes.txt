nuance inference

we want
    to capture the long gestures: cresc, accel
        Note: use 'gesture' more
    to separate these continuous gestures from momentary ones

two cases:
- create nuance for a particular performance of a work
    mostly a manual process
    data-fitting tool: picks PFT primitive types and parameters
    interface for viewing the deltas
- create nuance for a collection of performances of a work,
    with a common nuance structure so you can compare them
    Pick one of the performances
    generate nuance desc for that one; create structure S (manual)
    for each of the others:
        create nuance desc using S (automatic)
    look at the errors;
        if one of them sticks out
        (e.g. they put in a rit where no one else did)
        adjust the structure accordingly, and re-run

terms:

'tagged score'
    a score with tags, e.g. rh/lh, melody etc.

'nuance structure'
    a list of transformations
        function
        selector
        PFT not specified
    e.g. 2 continuous tempo transformations
        1 discrete pause layer
        1 discrete shift layer
        2 continuous volume transformations
        1 volume transform for tag 'rh'
        1 accent transform

'constrained nuance structure'
    ... some constraints on each transformation,
        e.g. max number or min length of primitives.
        Or maybe the durations of PFT primitives are fixed,
            but not curve type or parameters
        Does everyone do a ritardando over measures 1-8?

'nuance specification'
    list of transformations with the PFTs given

'Complexity' C(S) of a nuance spec S
    this can be defined in various ways:
        number of PFT primitives
        or Kolmogorov: min length of program that generates S

'Score rendition'
    a score, and a list of notes with start/dur/volume, and pedals
    with a (partial) one-to-one mapping from rendition notes to score notes
    
error E(spec, rendition)
    RMS (or max) of
        time diff
        vol diff

'nuance inference'
    idea:
        given a performance, how simply can we describe its nuance?
        a nuance structure has a "complexity" C and an "error" E.
        For given C, how low can be make E?
        For a given E, how simple a structure can we make?
    given a
        nuance structure
        performance
        score w/ tags
        set of PFT primitives
    ... find the transformations that most closely approximate the perf

    what about tags and note selectors?
        are these pre-assigned?
        yes, exponential complexity otherwise

    Nuance inference is probably an iterative process
        create a nuance structure
        loop
            automated data fitting
            look at result, tweak nuance structure

    purposes of inference
        evaluate continuous primitives
        characterize/compare
            performers
            periods
            nationalities
            schools e.g. Juliard
------------------
volume PFTs:
a linear segment is linear in score time -
not performance time, if there are tempo transformations.
Same for exp and other functions.

It would be possible to make the volume change linear in perf time.
- Find the start and end perf times of the volume primitive.
    (insert marker events if needed)
- Go through notes in the range of score times
    and adjust volume based on PFT value at their perf time.
-----------------
Big picture:
There are two levels to MNS:

- Nuance description
    a sequence of transformations, each of which is generally
        - operation
        - a PFT
        - a note selector
    These are static; values are hardwired
    Analogous to a CSS file

- Nuance scripting
    Scriptable (Python or other) system that generates a nuance description.
    This lets you have
    - parameterization: e.g. you can have variables that appear
        throughout the PFTs.
        e.g. variables that control the relative volume of melody
        and accompaniment,
        or the extent of tempo changes and rubato
    - looping and functions
        e.g. repeat this dynamic pattern 4 times
    Analogous to SASS: https://en.wikipedia.org/wiki/Sass_(style_sheet_language)

For long/complex pieces you need nuance scripting;
otherwise you'll get bored and stop

A nuance script can be a program.
E.g. Numula is a nuance generator implemented as a Python API.
One can also imagine a nuance generator that's more graphical
and less code-like,
e.g. you can create a volume contour by drag and drop,
have its parameters controlled by a slider,
and be able to replicate it.
----------------
$mns is not intended to model musical cognition or compositional structure.

