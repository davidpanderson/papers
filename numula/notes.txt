terms

'tagged score'
    a score with tags, e.g. rh/lh, melody etc.

'nuance structure'
    a list of transformations
        function
        selector
        PFT not specified
    e.g. 2 continuous tempo transformations
        1 discrete pause layer
        1 discrete shift layer
        2 continuous volume transformations
        1 volume transform for tag 'rh'
        1 accent transform

'constrained nuance structure'
    ... some constraints on each transformation,
        e.g. max number or min length of primitives.

'nuance specification'
    list of transformations with the PFTs given

'Complexity' C(S) of a nuance spec S
    this can be defined in various ways:
        number of PFT primitives
        or Kolmogorov: min length of program that generates S

'Score rendition'
    a score, and a list of notes with start/dur/volume, and pedals
    with a (partial) one-to-one mapping from rendition notes to score notes
    
error E(spec, rendition)
    RMS (or max) of
        time diff
        vol diff

'nuance inference'
    idea:
        given a performance, how simply can we describe its nuance?
        a nuance structure has a "complexity" C and an "error" E.
        For given C, how low can be make E?
        For a given E, how simple a structure can we make?
    given a
        nuance structure
        performance
        score w/ tags
        set of PFT primitives
    ... find the transformations that most closely approximate the perf

    what about tags and note selectors?
        are these pre-assigned?
        yes, exponential complexity otherwise

    Nuance inference is probably an iterative process
        create a nuance structure
        loop
            automated data fitting
            look at result, tweak nuance structure

    purposes of inference
        evaluate continuous primitives
        characterize/compare
            performers
            periods
            nationalities
            schools e.g. Juliard
------------------
volume PFTs:
a linear segment is linear in score time -
not performance time, if there are tempo transformations.
Same for exp and other functions.

It would be possible to make the volume change linear in perf time.
- Find the start and end perf times of the volume primitive.
    (insert marker events if needed)
- Go through notes in the range of score times
    and adjust volume based on PFT value at their perf time.
-----------------
Big picture:
There are two levels to MNS:

- Nuance descriptions
    a sequence of transformations, each of which is generally
        - operation
        - a PFT
        - a note selector
    These are static; all values are hardwired

- Nuance generators
    Code (Python or other) that generates a nuance description.
    This lets you have
    - parameterization: e.g. you can have variables that appear
        throughout the PFTs.
    - looping and functions
        e.g. repeat this dynamic pattern 4 times

For long/complex pieces you need nuance generators.

Numula is a nuance generator implemented as a Python module.
One can also imagine a nuance generator that's more graphical
and less code-like,
e.g. you can create a volume contour by drag and drop,
have its parameters controlled by a slider,
and be able to replicate it.
